var SeaColor;!function(t){var e=function(){function t(){}return t.prototype.getUserIcon=function(t,e){var r=t.id,n=(r%100).padLeft(2,"0");r=Math.floor(r/100);var i=(r%100).padLeft(2,"0");r=Math.floor(r/100);var o=(r%100).padLeft(2,"0");return"/uc_server/data/avatar/000/"+o+"/"+i+"/"+n+"_avatar_"+e+".jpg"},t.prototype.getUserIcon_Small=function(t){return this.getUserIcon(t,"small")},t.prototype.getUserIcon_Middle=function(t){return this.getUserIcon(t,"middle")},t.prototype.getUserIcon_Big=function(t){return this.getUserIcon(t,"big")},t.prototype.getUserInfo=function(t){var e=t.find("a"),r=e.attr("href"),n="",i=r.indexOf("space-uid-");return i>=0&&(n=r.substring(i+"space-uid-".length),i=n.indexOf(".html"),n=n.substring(0,i)),{id:parseInt(n),name:e.text()}},t.prototype.getTopic=function(t){var e=t.find("a.s.xst"),r=t.find(".by:last em a"),n={comment_count:parseInt(t.find("em.t9_01").text()),view_count:parseInt(t.find("em.t9_02").text()),title:e.text().trim(),url:e.attr("href"),title_color:e.css("color"),des:t.find(".common div:last").html(),host:this.getUserInfo(t.find(".by:first cite:first")),last_view:this.getUserInfo(t.find(".by:first cite:last")),date:r.find("span").attr("title"),date_text:r.text(),last_comment_url:r.attr("href")};return n.date||(n.date=n.date_text,n.date_text=null),n},t.prototype.getTopicItem=function(t){return this.getTopic(t)},t.prototype.getAllItem=function(){return jQuery("#threadlisttableid tbody")},t.prototype.getAllTopicItem=function(){var t=this,e=this.getAllItem();return e.toEnumerable().Select(function(e){return t.getTopicItem(e)}).ToArray()},t}();t.ForumData=e;var r=function(){function r(){this.data=new e,this.topic_list=[]}return r.prototype.createItem=function(e){return e&&e.title&&e.url?t.Helper.createElement("div","item").append(t.Helper.createElement("div","left").append(t.Helper.createElement("div","bg")).append(t.Helper.createElement("h4").append(t.Helper.createLink(e.url,e.title))).append(t.Helper.createElement("div").html(e.des))).append(t.Helper.createElement("div","right").append(t.Helper.createElement("div","user").append(t.Helper.createImage(this.data.getUserIcon_Middle(e.host))).append(t.Helper.createElement("div").text(e.host.name)))).append(t.Helper.createElement("div","clear")):null},r.prototype.createList=function(e){var r=this,n=t.Helper.createElement("div","topic_list");return Enumerable.From(e).Select(function(t){return r.createItem(t)}).Where(function(t){return!!t}).ForEach(function(t){return n.append(t)}),n},r.prototype.rebuild=function(){var e=jQuery("body");e.empty().append(t.Helper.createElement("div","main_content","forum").append(this.createList(this.topic_list)))},r.prototype.init=function(){this.topic_list=this.data.getAllTopicItem(),this.rebuild()},r}();t.Forum=r}(SeaColor||(SeaColor={})),(new SeaColor.Forum).init();
//# sourceMappingURL=../maps/forum.min.js.map
