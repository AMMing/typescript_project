var SeaColor;!function(e){var t=function(){function e(){this.cate_data=[{id:1,parent_id:0,name:"发放中",key:"钢100"},{id:2,parent_id:0,name:"绝版",key:"绝版"},{id:3,parent_id:1,name:"真爱",key:"真爱"},{id:4,parent_id:2,name:"甲",key:"甲"},{id:5,parent_id:4,name:"2015",key:"2015"}]}return e.prototype.setCateChild=function(e){void 0===e&&(e=0);for(var t=[],a=0;a<this.cate_data.length;a++){var i=this.cate_data[a];i.parent_id==e&&(i.child=this.setCateChild(i.id),t.push(i))}return t},e.prototype.isCate=function(e,t){var a=t.find(".tip_c p:first-child").text();return a.indexOf(e.key)>=0},e.prototype.setCateMedals=function(e,t){if(!(null==e||null==t||e.length<=0||t.length<=0))for(var a=0;a<e.length;a++){var i=e[a];null==i.medals&&(i.medals=[]);for(var n=0;n<t.length;n++){var r=t[n];if(this.isCate(i,r)){var l=t.splice(n,1);i.medals.push(l[0]),n--}}this.setCateMedals(i.child,i.medals)}},e.prototype.initMedals=function(){var e=[],t=this.$page_medal_container.find("li");t.each(function(t,a){return e.push(jQuery(a))}),this.setCateMedals(this.cate_list,e),this.cate_list.push({id:9999,parent_id:0,name:"其他",key:null,medals:e})},e.prototype.createElement=function(e){return jQuery("<"+e+"></"+e+">")},e.prototype.createClear=function(){return this.createElement("div").addClass("clear")},e.prototype.createCateTitle=function(e){var t=this.createElement("div").addClass("title");return t.append(this.createElement("div").addClass("bg")),t.append(this.createElement("h5").text(e.name)),t},e.prototype.createChildCates=function(e,t){if(null==e||e.length<=0)return null;for(var a=this.createElement("div").addClass("child"),i=0;i<e.length;i++){var n=e[i];a.append(this.createCate(n,t))}return a},e.prototype.createMedals=function(e){if(null==e||e.length<=0)return null;for(var t=this.createElement("ul").addClass("medals"),a=(jQuery("<li></li>"),0);a<e.length;a++){var i=e[a];t.append(i)}return t},e.prototype.createCate=function(e,t){var a=this.createElement("div").addClass("medal_frame").addClass("level_"+t).data("cate_id",e.id);a.append(this.createCateTitle(e));var i=this.createChildCates(e.child,t+1);null!=i&&a.append(i);var n=this.createMedals(e.medals);return null!=n&&a.append(n),a.append(this.createClear()),a},e.prototype.createMedalCates=function(){for(var e=this.createElement("div").addClass("medal_main"),t=0;t<this.cate_list.length;t++){var a=this.cate_list[t];e.append(this.createCate(a,1))}this.$medal_container=e,this.$page_medal_container.empty(),this.$page_medal_container.after(this.$medal_container)},e.prototype.setBackgorundPosition=function(e){var t=e.offset();e.css("background-position",-1*(t.left-this.origin_position.left)+"px "+-1*(t.top-this.origin_position.top)+"px")},e.prototype.setBackgorund=function(){var e=this;this.origin_position=this.$medal_container.offset(),jQuery(".medals li").prepend(this.createElement("div").addClass("bg"));var t=jQuery(".medals li>.bg,.medal_frame .title >.bg");t.each(function(t,a){return e.setBackgorundPosition(jQuery(a))})},e.prototype.init=function(){var e=this;this.$page_medal_container=jQuery("ul.mtm.mgcl.cl"),this.cate_list=this.setCateChild(),this.initMedals(),this.createMedalCates(),this.setBackgorund(),setTimeout(function(){return e.setBackgorund()},300)},e}();e.Medal=t}(SeaColor||(SeaColor={})),(new SeaColor.Medal).init();