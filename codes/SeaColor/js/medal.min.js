var SeaColor;!function(e){var t=function(){function e(){this.cate_list=[{name:"发放中",child:[{name:"活动勋章"},{name:"节日勋章"},{name:"海色祭勋章"},{name:"真爱勋章",child:[{name:"2015年冬季款"}]},{name:"作死勋章"},{name:"杂项"}]},{name:"已绝版",key:"绝版",child:[{name:"活动勋章"},{name:"节日勋章"},{name:"海色祭勋章"},{name:"真爱勋章",child:[{name:"2015年冬季款"}]},{name:"作死勋章"},{name:"杂项"}]},{name:"工作组勋章"}]}return e.prototype.isCate=function(e,t){var a=t.find(".tip_c p:first-child").text(),i=e.key;return i||(i=e.name.replace("勋章","")),a.indexOf(i)>=0},e.prototype.setCateMedals=function(e,t){if(!(null==e||null==t||e.length<=0||t.length<=0))for(var a=0;a<e.length;a++){var i=e[a];null==i.medals&&(i.medals=[]);for(var n=0;n<t.length;n++){var r=t[n];if(this.isCate(i,r)){var l=t.splice(n,1);i.medals.push(l[0]),n--}}this.setCateMedals(i.child,i.medals)}},e.prototype.initMedals=function(){var e=[],t=this.$page_medal_container.find("li");t.each(function(t,a){return e.push(jQuery(a))}),this.setCateMedals(this.cate_list,e),this.cate_list.push({name:"准备中",medals:e})},e.prototype.createElement=function(e){return jQuery("<"+e+"></"+e+">")},e.prototype.createClear=function(){return this.createElement("div").addClass("clear")},e.prototype.createCateTitle=function(e){var t=this.createElement("div").addClass("title");return t.append(this.createElement("div").addClass("bg")),t.append(this.createElement("h5").text(e.name)),t},e.prototype.createChildCates=function(e,t){if(null==e||e.length<=0)return null;for(var a=this.createElement("div").addClass("child"),i=!1,n=0;n<e.length;n++){var r=e[n],l=this.createCate(r,t);a.append(l.item),l.show&&(i=!0)}return{items:a,show:i}},e.prototype.setMedalItem=function(e){e.find(".xi2").length<=0&&e.addClass("disable")},e.prototype.createMedals=function(e){if(null==e||e.length<=0)return null;for(var t=this.createElement("ul").addClass("medals"),a=(jQuery("<li></li>"),0);a<e.length;a++){var i=e[a];this.setMedalItem(i),t.append(i)}return t},e.prototype.createCate=function(e,t){var a=!1,i=this.createElement("div").addClass("medal_frame").addClass("level_"+t);i.append(this.createCateTitle(e));var n=this.createChildCates(e.child,t+1);null!=n&&(i.append(n.items),n.show&&(a=!0));var r=this.createMedals(e.medals);return null!=r&&(i.append(r),a=!0),a&&i.addClass("show"),i.append(this.createClear()),{item:i,show:a}},e.prototype.createMedalCates=function(){for(var e=this.createElement("div").addClass("medal_main"),t=0;t<this.cate_list.length;t++){var a=this.cate_list[t],i=this.createCate(a,1);e.append(i.item)}this.$medal_container=e,this.$page_medal_container.empty(),this.$page_medal_container.after(this.$medal_container)},e.prototype.setBackgorundPosition=function(e){var t=e.offset();e.css("background-position",-1*(t.left-this.origin_position.left)+"px "+-1*(t.top-this.origin_position.top)+"px")},e.prototype.setBackgorund=function(){var e=this;this.origin_position=this.$medal_container.offset();var t=jQuery(".medals li>.bg,.medal_frame .title >.bg");t.each(function(t,a){return e.setBackgorundPosition(jQuery(a))})},e.prototype.hideAllMedalTip=function(){this.$medal_container.find(".medals li .tip").hide()},e.prototype.setMedalTip=function(){var e=this,t=this.$medal_container.find(".medals li");t.find(".mg_img").each(function(e,t){return t.onmouseover=null}),t.mouseover(function(t){e.hideAllMedalTip();var a=jQuery(t.currentTarget);a.find(".tip").show()}),t.mouseout(function(t){return e.hideAllMedalTip()}),t.click(function(e){var t=jQuery(e.currentTarget);t.find(".xi2").trigger("click")})},e.prototype.init=function(){var e=this;this.$page_medal_container=jQuery("ul.mtm.mgcl.cl"),this.initMedals(),this.createMedalCates(),this.setBackgorund(),this.setMedalTip(),setTimeout(function(){return e.setBackgorund()},300)},e}();e.Medal=t}(SeaColor||(SeaColor={})),(new SeaColor.Medal).init();