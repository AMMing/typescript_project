var SeaColor;!function(e){var t=function(){function t(){this.cate_list=[{name:"发放中",child:[{name:"活动勋章"},{name:"节日勋章"},{name:"海色祭勋章"},{name:"真爱勋章",child:[{name:"2015年冬季款"}]},{name:"作死勋章"},{name:"杂项"}]},{name:"已绝版",key:"绝版",child:[{name:"活动勋章"},{name:"节日勋章"},{name:"海色祭勋章"},{name:"真爱勋章",child:[{name:"2015年冬季款"}]},{name:"作死勋章"},{name:"杂项"}]},{name:"工作组勋章"}]}return t.prototype.isCate=function(e,t){var a=t.find(".tip_c p:first-child").text(),n=e.key;return n||(n=e.name.replace("勋章","")),a.indexOf(n)>=0},t.prototype.setCateMedals=function(e,t){if(!(null==e||null==t||e.length<=0||t.length<=0))for(var a=0;a<e.length;a++){var n=e[a];null==n.medals&&(n.medals=[]);for(var i=0;i<t.length;i++){var l=t[i];if(this.isCate(n,l)){var r=t.splice(i,1);n.medals.push(r[0]),i--}}this.setCateMedals(n.child,n.medals)}},t.prototype.initMedals=function(){var e=[],t=this.$page_medal_container.find("li");t.each(function(t,a){return e.push(jQuery(a))}),this.setCateMedals(this.cate_list,e),this.cate_list.push({name:"准备中",medals:e})},t.prototype.createClear=function(){return e.Helper.createElement("div").addClass("clear")},t.prototype.createCateTitle=function(t){var a=e.Helper.createElement("div").addClass("title");return a.append(e.Helper.createElement("div").addClass("bg")),a.append(e.Helper.createElement("h5").text(t.name)),a},t.prototype.createChildCates=function(t,a){if(null==t||t.length<=0)return null;for(var n=e.Helper.createElement("div").addClass("child"),i=!1,l=0;l<t.length;l++){var r=t[l],s=this.createCate(r,a);n.append(s.item),s.show&&(i=!0)}return{items:n,show:i}},t.prototype.setMedalItem=function(e){e.find('p:contains("已拥有")').length>0?e.addClass("hold"):e.find(".xi2").length<=0&&e.addClass("disable")},t.prototype.createMedals=function(t){if(null==t||t.length<=0)return null;for(var a=e.Helper.createElement("ul").addClass("medals"),n=(jQuery("<li></li>"),0);n<t.length;n++){var i=t[n];this.setMedalItem(i),a.append(i)}return a},t.prototype.createCate=function(t,a){var n=!1,i=e.Helper.createElement("div").addClass("medal_frame").addClass("level_"+a);i.append(this.createCateTitle(t));var l=this.createChildCates(t.child,a+1);null!=l&&(i.append(l.items),l.show&&(n=!0));var r=this.createMedals(t.medals);return null!=r&&(i.append(r),n=!0),n&&i.addClass("show"),i.append(this.createClear()),{item:i,show:n}},t.prototype.createMedalCates=function(){for(var t=e.Helper.createElement("div").addClass("medal_main"),a=0;a<this.cate_list.length;a++){var n=this.cate_list[a],i=this.createCate(n,1);t.append(i.item)}this.$medal_container=t,this.$page_medal_container.empty(),this.$page_medal_container.after(this.$medal_container)},t.prototype.setBackgorundPosition=function(e){var t=e.offset();e.css("background-position",-1*(t.left-this.origin_position.left)+"px "+-1*(t.top-this.origin_position.top)+"px")},t.prototype.setBackgorund=function(){var e=this;this.origin_position=this.$medal_container.offset();var t=jQuery(".medals li>.bg,.medal_frame .title >.bg");t.each(function(t,a){return e.setBackgorundPosition(jQuery(a))})},t.prototype.hideAllMedalTip=function(){this.$medal_container.find(".medals li .tip").hide()},t.prototype.setMedalTip=function(){var e=this,t=this.$medal_container.find(".medals li");t.find(".mg_img").each(function(e,t){return t.onmouseover=null}),t.mouseover(function(t){e.hideAllMedalTip();var a=jQuery(t.currentTarget);a.find(".tip").show()}),t.mouseout(function(t){return e.hideAllMedalTip()}),t.click(function(e){var t=jQuery(e.currentTarget);t.find(".xi2").trigger("click")})},t.prototype.init=function(){var e=this;this.$page_medal_container=jQuery("ul.mtm.mgcl.cl"),this.initMedals(),this.createMedalCates(),this.setBackgorund(),this.setMedalTip(),setTimeout(function(){return e.setBackgorund()},300)},t}();e.Medal=t}(SeaColor||(SeaColor={})),(new SeaColor.Medal).init();
//# sourceMappingURL=../maps/medal.min.js.map
